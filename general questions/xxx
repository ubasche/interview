

Enable force logging 

Set LOG_ARCHIVE_CONFIG parameter for data guard config.

  SQL> ALTER SYSTEM SET LOG_ARCHIVE_CONFIG='DG_CONFIG=(RTS,RTSDR)';

Set LOG_ARCHIVE_DEST_2

  SQL> ALTER SYSTEM SET LOG_ARCHIVE_DEST_2=

    'SERVICE=RTSDR NOAFFIRM ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=RTSDR';

Set fal_server and fal_client parameter for primary database

  SQL> alter system set fal_server='RTSDR';
  SQL> alter system set fal_client='RTS';

Set standby_file_management parameter to auto:

  SQL> alter system set standby_file_management=auto;

Backup primary database


Sandby DB: After creating parameter file as above, edit following changes in newly created pfile:

  *.db_unique_name='RTSDR'
  *.fal_server='RTS';
  *.log_archive_dest_2='SERVICE=RTS ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=RTS'

Copy standby control file to DR 
Copy password file to DR 
Copy Listener file to DR


Standby/DR Server Configurations:

Restore and recover database @ DR with RMAN backup utility.

  RMAN> restore database;
  RMAN> recover database;

Create standby redolog file to Primary and DR

Start apply process @ DR.

  SQL> ALTER DATABASE RECOVER MANAGED STANDBY DATABASE nodelay DISCONNECT FROM SESSION;




Difference between physical standby database and Data Guard 

The use of dataguard broker used to maintain (administrate) and operate a physical
and/or logical standby database.

Dataguard is mechanism/tool to maintain standby database.

Data Guard broker command-line interface (DGMGRL)



duplicate target database 
  for standby 
  from active database


Create a logical standby database

  1.  Create a Physical Standby Database
  2. Stop Redo Apply on the Physical Standby Database
  3. Prepare the Primary Database to Support a Logical Standby Database


    Include the LOG_ARCHIVE_DEST_3 destination on the primary database. 
    This parameter only takes effect when the primary database is transitioned 
    to the logical standby role.

Example 4-1 Primary Database: Logical Standby Role Initialization Parameters

LOG_ARCHIVE_DEST_1=
 'LOCATION=/arch1/chicago/ 
  VALID_FOR=(ONLINE_LOGFILES,ALL_ROLES)
  DB_UNIQUE_NAME=chicago'
LOG_ARCHIVE_DEST_3=
 'LOCATION=/arch2/chicago/
  VALID_FOR=(STANDBY_LOGFILES,STANDBY_ROLE) 
  DB_UNIQUE_NAME=chicago'
LOG_ARCHIVE_DEST_STATE_3=ENABLE

    Build a Dictionary in the Redo Data

      SQL> EXECUTE DBMS_LOGSTDBY.BUILD;

  In Oracle 11g release 2 (11.2) or later, supplemental logging information is automatically 
  propagated to any existing physical standby databases. For older releases:

     SQL>  ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY, UNIQUE INDEX) COLUMNS;



  4. Transition to a Logical Standby Database
    Convert to a Logical Standby Database
      
      SQL> STARTUP MOUNT EXCLUSIVE; 
      SQL> ALTER DATABASE RECOVER TO LOGICAL STANDBY db_name;

    Open the Logical Standby Database

      SQL> ALTER DATABASE OPEN RESETLOGS;







  